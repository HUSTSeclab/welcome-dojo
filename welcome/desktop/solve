#!/opt/pwn.college/bash

# art from https://emojicombos.com/pokemon-ascii-art
cat <<END | while read LINE; do echo "$LINE"; sleep 0.1; done
⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⣠⣿⣿⣆⣠⣴⣶⡄⠀⠀⠀⠀⠀⠀
⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢀⣀⣠⣶⣿⠋⢹⣿⠟⣹⣿⣥⣤⡀⠀⠀⠀⠀
⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢀⣀⣤⣴⣶⠿⠿⠿⠿⠿⠿⠿⠿⠿⠿⠿⠛⠛⢉⣠⣴⣿⠏⠀⣿⡟⣽⡿⠃⠀⠀⠀⠀
⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢀⣠⣶⡿⠟⠋⠉⠀⠀⠀⠀⠀⢀⣀⣤⣤⣤⣶⣶⠀⠘⠛⠛⠉⠀⠀⢰⣿⢱⣿⠃⠀⠀⠀⠀⠀
⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢠⣾⡿⠋⠀⠀⠀⠀⠀⠀⠀⣠⣾⡿⠛⠋⠉⠁⠀⠀⠀⠀⠀⠀⠀⠀⠀⢸⡇⠸⣿⡀⠀⠀⠀⠀⠀
⠀⠀⠀⠀⠀⠀⣠⣿⠟⠛⠿⣷⣶⣤⣀⣤⣤⣤⣤⣤⣿⣟⣀⣀⠀⠀⠀⣀⣠⣤⣾⣿⣿⣶⡀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢸⣷⠀⢿⣧⠀⠀⠀⠀⠀
⠀⠀⠀⠀⠀⢰⣿⠋⠀⠀⣶⡿⠿⠛⠋⠉⠉⠉⠉⠉⠉⠙⠛⠛⠻⣿⣿⠿⠛⠉⠉⠀⠈⢻⣧⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⣿⡇⠘⣿⣧⠀⠀⠀⠀
⠀⠀⠀⠀⠀⣿⣿⣶⠆⠀⠀⠀⠀⠀⣀⣤⣤⣶⡶⠶⢿⣿⡆⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠘⣿⡆⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢸⣿⡀⠘⢿⣷⡀⠀⠀
⠀⠀⠀⠀⣸⣿⡿⠁⠀⠀⠀⢠⣶⣿⠟⠋⠉⠀⢀⣴⣿⠏⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢿⣇⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢹⣷⠀⠈⢿⣷⡀⠀
⠀⠀⠀⣴⣿⠋⠀⠀⠀⠀⣀⡈⢿⣷⣄⣀⣴⣾⠿⠋⠁⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢸⣿⡀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⣿⡇⠀⠈⢿⣷⠀
⠀⠀⣼⣿⣿⣿⣆⣤⡄⣿⣿⡇⠀⠈⠛⠛⠋⠁⠀⠀⠀⣤⡄⠀⢀⣠⣤⣤⣀⠀⠀⠀⠀⠀⠈⣿⣿⣦⡀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢸⣿⠀⠀⠘⣿⡆
⠀⣰⣿⣿⣿⣿⣿⣿⡇⠿⠿⠃⠀⢀⣠⣶⣶⠀⠀⢀⣾⡟⠁⣴⣾⣿⡿⠙⢿⣷⡀⠀⠀⠀⠀⢹⣿⠻⣿⣦⡀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢸⣿⠀⠀⠀⢻⣧
⢀⣿⣿⢿⣿⣿⣿⠿⠇⠀⠀⠀⣤⣿⠟⢹⣿⠀⠀⢸⣿⢀⣾⡿⢹⣿⢱⣿⣿⣿⣷⠀⠀⠀⠀⢸⣿⠀⣨⣿⣿⣦⡀⠀⠀⠀⠀⠀⠀⢀⡘⠋⠀⠀⠀⢸⣿
⢸⣿⡟⢸⣿⣿⣿⠀⠀⠀⠀⠀⠙⢿⣷⣼⡟⠀⠀⠈⠁⣸⣿⠀⢸⡟⢸⣇⣸⡯⣿⡇⠀⠀⠀⠈⣿⠀⣿⣯⠈⠛⢿⣷⣤⡀⠀⣀⣴⣿⠋⠀⠀⠀⠀⢸⣿
⣿⡿⣷⣼⣿⣿⣿⠀⠀⠀⠀⠀⠀⠀⠈⠉⠁⠀⠀⠀⠀⣿⡇⠀⢸⣿⠘⢿⣿⠃⢸⡇⠀⠀⠀⠀⠿⠀⠘⣿⣦⠀⠀⠈⠻⣿⣿⣟⠋⠁⠀⠀⠀⠀⠀⣿⡏
⣿⣧⣍⠛⠿⠿⠏⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⣿⣧⣀⣸⣿⣦⣤⣶⣾⢿⣇⠀⠀⠀⠀⠀⠀⠀⠈⢿⣧⠀⠀⠀⠘⣿⢿⣷⣄⠀⠀⠀⢀⣼⣿⠃
⢻⣿⣿⣷⣤⣄⠀⢰⣦⠀⠀⢀⣤⡄⠀⠀⠀⠀⠀⠀⠀⠉⠉⠉⠉⠉⠉⢉⣠⣤⣾⡿⠀⠀⠀⠀⠀⠀⠀⠀⠈⠻⠿⠶⠶⠾⠿⠀⠙⢿⣷⣤⣶⣿⡿⠁⠀
⠀⠙⠿⣿⣿⣿⣿⣿⣿⣦⣤⣌⣉⣁⣀⣀⣠⣤⣤⣤⣤⣤⣤⣶⣶⣶⣿⣿⠟⠋⠁⠀⢀⣼⡿⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠈⢿⣿⡟⠁⠀⠀⠀
⠀⠀⠀⠈⠛⠿⣿⣿⣿⣿⣯⣍⣉⠉⠉⠉⠉⠉⠉⠉⠉⢁⣠⣴⣿⠟⠋⠁⠀⢀⣠⣴⣿⠟⠁⠀⠀⠀⠀⠀⢸⣿⠀⣠⣶⠆⢀⣀⠀⠀⠈⢻⣷⡀⠀⠀⠀
⠀⠀⠀⠀⠀⠀⠈⣿⠻⣿⣿⣿⣿⣿⣶⣶⣶⣶⣶⣶⠿⠟⠛⠉⢀⣀⣤⣴⣶⣿⣿⠋⠀⠀⣀⡀⠀⠀⠀⠀⠘⣿⣾⣟⣥⣾⡿⣿⡇⠀⠀⠈⣿⡇⠀⠀⠀
⠀⠀⠀⠀⠀⠀⠀⣿⡄⠀⣈⣽⣿⡻⠿⢿⣷⣶⣶⣶⠿⠿⠿⠿⠛⠛⠉⠉⣿⣿⠏⠀⣴⣿⢿⣇⠀⠀⠀⠀⢸⣿⣿⣿⠟⠁⠀⢹⡇⠀⠀⠀⢸⣷⠀⠀⠀
⠀⠀⠀⠀⠀⠀⠀⣿⣧⣾⠟⠋⢿⡇⠀⠈⠻⢿⣦⣄⡀⠀⠀⠀⠀⠀⠀⢠⣿⣷⣾⢿⣿⠿⠿⠟⠀⠀⠀⠀⣼⡿⠈⢿⣧⡀⠀⢸⣧⠀⠀⠀⢸⣿⠀⠀⠀
⠀⠀⠀⠀⠀⠀⠀⠸⣿⡏⠀⢀⣼⡿⠀⠀⠀⠀⠉⢻⣿⣷⣶⣤⣤⣀⣀⣾⡿⠋⠁⣾⡏⠀⠀⠀⠀⠀⠀⣼⣿⠃⠀⠈⠻⢿⣶⡿⠏⠀⠀⠀⣸⡿⠀⠀⠀
⠀⠀⠀⠀⠀⠀⠀⠀⢹⣿⡶⠾⠟⠁⠀⠀⠀⠀⢠⣿⠟⠀⠈⢿⣿⣛⢻⣿⠁⠀⢰⣿⠁⠀⠀⠀⠀⢀⣼⣿⣿⡇⠀⠀⠀⠀⠀⠀⠀⠀⠀⢠⣿⠇⠀⠀⠀
⠀⠀⠀⠀⠀⠀⠀⠀⠀⣿⣷⣤⣄⠀⣀⡀⠀⣰⣿⠟⠀⠀⠀⠀⢹⣿⣿⣿⣷⣶⡿⠋⠀⠀⠀⠀⣠⣾⡿⠉⠹⣿⣄⡀⠀⠀⠀⠀⠀⠀⢀⣾⡿⠀⠀⠀⠀
⠀⠀⠀⠀⠀⠀⠀⠀⠀⢿⣿⣿⣿⣿⣿⣿⣾⠿⠃⠀⠀⠀⠀⠀⠀⢠⣿⣷⣤⣶⣤⣀⣤⣄⣠⣾⣿⠏⠀⠀⠀⢹⣿⣿⣿⣿⣷⣾⣿⣷⣿⠟⠀⠀⠀⠀⠀
⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠉⠁⠀⠉⠉⠁⠀⠀⠀⠀⠀⠀⠀⠀⠀⠘⠛⠛⢿⣿⣿⢿⣿⡿⠛⠋⠀⠀⠀⠀⠀⠀⠉⠁⠙⠛⠋⠙⠛⠋⠀⠀⠀⠀⠀⠀⠀
欢迎来到 pwn.hust.college，请确认使用桌面终端程序运行该挑战！
END

echo -n "检查中"
for i in {1..10}
do
	echo -n "."
	sleep 0.1
done
echo -n $'\r'

if [ "$TERM_PROGRAM" != "vscode" ] && [ "$TERM" == "xterm*" ]
then
	echo "通过！你确实在桌面环境中运行挑战关卡！"
	echo -n "你的 flag 是："
	cat /flag
	cat <<END

现在，从桌面复制你的 flag！这需要一些工作。具体步骤如下:

1. 用鼠标选择 flag，右键点击，复制 flag。目前 flag 是在平台的剪贴板中，但不是在宿主机系统的剪贴板中!
2. 点击桌面左侧的 “▸” 按钮。
3. 点击剪贴板按钮。现在您可以选中这些内容，进行复制（如 Ctrl-C），放入系统的剪贴板中!
4. 复制完成后，跳转到挑战关卡页面，将其粘贴到 flag 提交框中!

END
else
	echo "请确认在桌面环境运行挑战关卡，而不是 VSCode 或 SSH！"
fi
